{"ast":null,"code":"import _regeneratorRuntime from\"/home/user/app/e11/Chat-App/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/user/app/e11/Chat-App/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/user/app/e11/Chat-App/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Col,Container,Button,Form,Row}from\"react-bootstrap\";import\"./Signup.css\";import avatarImg from\"../assets/avatarImg.jpg\";import{useSignupUserMutation}from\"../services/appApi\";import{Link,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useSignupUserMutatio=useSignupUserMutation(),_useSignupUserMutatio2=_slicedToArray(_useSignupUserMutatio,2),signupUser=_useSignupUserMutatio2[0],_useSignupUserMutatio3=_useSignupUserMutatio2[1],isLoading=_useSignupUserMutatio3.isLoading,error=_useSignupUserMutatio3.error;var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),uploadingImg=_useState10[0],setUploadingImg=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),imagePreview=_useState12[0],setImagePreview=_useState12[1];var navigate=useNavigate();function validateImg(e){var file=e.target.files[0];if(file.size>=1048576){return alert(\"Max file size is 1mb\");}else{setImage(file);setImagePreview(URL.createObjectURL(file));}}function uploadImage(){return _uploadImage.apply(this,arguments);}function _uploadImage(){_uploadImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,res,urlData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"chatapp\");_context.prev=3;setUploadingImg(true);_context.next=7;return fetch(\"https://api.cloudinary.com/v1_1/dh21ivbxo/image/upload\",{method:\"post\",body:data});case 7:res=_context.sent;_context.next=10;return res.json();case 10:urlData=_context.sent;setUploadingImg(false);return _context.abrupt(\"return\",urlData.url);case 15:_context.prev=15;_context.t0=_context[\"catch\"](3);setUploadingImg(false);console.log(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[3,15]]);}));return _uploadImage.apply(this,arguments);}function handleSignup(_x){return _handleSignup.apply(this,arguments);}function _handleSignup(){_handleSignup=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var url;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(image){_context2.next=3;break;}return _context2.abrupt(\"return\",alert(\"Please upload your profile picture\"));case 3:_context2.next=5;return uploadImage(image);case 5:url=_context2.sent;console.log(url);// signup the user\nsignupUser({name:name,email:email,password:password,picture:url}).then(function(_ref){var data=_ref.data;if(data){console.log(data);navigate(\"/chat\");}else{console.log(error);}});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSignup.apply(this,arguments);}return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:7,className:\"d-flex align-items-center justify-content-center flex-direction-column\",children:/*#__PURE__*/_jsxs(Form,{style:{width:\"80%\",maxWidth:500},onSubmit:handleSignup,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Create Account\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-profile-pic__container\",children:[/*#__PURE__*/_jsx(\"img\",{src:imagePreview||avatarImg,className:\"signup-profile-pic\",alt:\"\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image-upload\",className:\"image-upload-label\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle add-picture-icon\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image-upload\",hidden:true,accept:\"image/png, image/jpeg, image/gif, image/jpg\",onChange:validateImg})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\" alert alert-danger\",children:error.data}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicName\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Your Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"your name..\",onChange:function onChange(e){return setName(e.target.value);},value:name})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"your mail..\",onChange:function onChange(e){return setEmail(e.target.value);},value:email}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password})]}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formBasicCheckbox\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"Check me out\"})}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:uploadingImg||isLoading?\"Signing you up...\":\"Signup\"}),/*#__PURE__*/_jsx(\"div\",{className:\"py-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-center\",children:[\"Already have and account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})})]})}),/*#__PURE__*/_jsx(Col,{md:5,className:\"signup__bg\"})]})});}export default Signup;","map":{"version":3,"names":["React","useState","Col","Container","Button","Form","Row","avatarImg","useSignupUserMutation","Link","useNavigate","Signup","email","setEmail","password","setPassword","name","setName","signupUser","isLoading","error","image","setImage","uploadingImg","setUploadingImg","imagePreview","setImagePreview","navigate","validateImg","e","file","target","files","size","alert","URL","createObjectURL","uploadImage","data","FormData","append","fetch","method","body","res","json","urlData","url","console","log","handleSignup","preventDefault","picture","then","width","maxWidth","value"],"sources":["/home/user/app/e11/Chat-App/frontend/src/pages/Signup.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Col, Container, Button, Form, Row } from \"react-bootstrap\";\nimport \"./Signup.css\";\nimport avatarImg from \"../assets/avatarImg.jpg\";\nimport { useSignupUserMutation } from \"../services/appApi\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\n\nfunction Signup() {\n  const [email, setEmail] = useState('') ;\n  const [password, setPassword] = useState('')\n  const [name, setName] = useState('')\n  const [signupUser, { isLoading, error }] = useSignupUserMutation();\n\n  const [image, setImage] = useState(null);\n  const [uploadingImg, setUploadingImg] = useState(false);\n  const [imagePreview, setImagePreview] = useState(null);\n  const navigate = useNavigate();\n\n  function validateImg(e) {\n    const file = e.target.files[0];\n    if (file.size >= 1048576) {\n        return alert(\"Max file size is 1mb\");\n    } else {\n        setImage(file);\n        setImagePreview(URL.createObjectURL(file));\n    }\n}\nasync function uploadImage() {\n  const data = new FormData();\n  data.append(\"file\", image);\n  data.append(\"upload_preset\", \"chatapp\");\n  try {\n      setUploadingImg(true);\n      let res = await fetch(\"https://api.cloudinary.com/v1_1/dh21ivbxo/image/upload\", {\n          method: \"post\",\n          body: data,\n      });\n      const urlData = await res.json();\n      setUploadingImg(false);\n      return urlData.url;\n  } catch (error) {\n      setUploadingImg(false);\n      console.log(error);\n  }\n}\n\nasync function handleSignup(e) {\n  e.preventDefault();\n  if (!image) return alert(\"Please upload your profile picture\");\n  const url = await uploadImage(image);\n  console.log(url);\n  // signup the user\n  signupUser({ name, email, password, picture: url }).then(({ data }) => {\n      if (data) {\n          console.log(data);\n          navigate(\"/chat\");\n      }\n      else{console.log(error)}\n  });\n}\n\n  return (\n    <Container>\n      <Row>\n        <Col\n          md={7}\n          className='d-flex align-items-center justify-content-center flex-direction-column'\n        >\n          <Form style={{ width: \"80%\", maxWidth: 500 }} onSubmit={handleSignup}>\n            <h1 className='text-center'>Create Account</h1>\n            <div className='signup-profile-pic__container'>\n              <img src={imagePreview || avatarImg} className='signup-profile-pic' alt =\"\" />\n              <label htmlFor='image-upload' className='image-upload-label'>\n                <i className='fas fa-plus-circle add-picture-icon'></i>\n              </label>\n              <input\n                type='file'\n                id='image-upload'\n                hidden\n                accept='image/png, image/jpeg, image/gif, image/jpg'\n                onChange={validateImg}\n              />\n            </div>\n            {error && <p className=\" alert alert-danger\">{error.data}</p>}\n            <Form.Group className='mb-3' controlId='formBasicName'>\n              <Form.Label>Your Name</Form.Label>\n              <Form.Control type='text' placeholder='your name..' onChange={(e)=>setName(e.target.value)} value={name}/>\n            </Form.Group>\n            <Form.Group className='mb-3' controlId='formBasicEmail'>\n              <Form.Label>Email address</Form.Label>\n              <Form.Control type='email' placeholder='your mail..' onChange={(e)=>setEmail(e.target.value)} value={email}/>\n              <Form.Text className='text-muted'>\n               \n              </Form.Text>\n            </Form.Group>\n\n            <Form.Group className='mb-3' controlId='formBasicPassword'>\n              <Form.Label>Password</Form.Label>\n              <Form.Control type='password' placeholder='Password'onChange={(e)=>setPassword(e.target.value)} value={password}/>\n            </Form.Group>\n            <Form.Group className='mb-3' controlId='formBasicCheckbox'>\n              <Form.Check type='checkbox' label='Check me out' />\n            </Form.Group>\n            <Button variant='primary' type='submit'>\n            {uploadingImg || isLoading ? \"Signing you up...\" : \"Signup\"}\n            </Button>\n            <div className='py-4'>\n              <p className='text-center'>\n                Already have and account? <Link to='/login'>Login</Link>\n              </p>\n            </div>\n          </Form>\n        </Col>\n        <Col md={5} className='signup__bg'></Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default Signup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}